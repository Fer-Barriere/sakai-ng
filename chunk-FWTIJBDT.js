import{a as Et,b as It}from"./chunk-GD5R7AMI.js";import{A as ce,B as tt,a as Bt,b as Je,d as kt,f as Vt,g as De,h as ne,i as Ft,j as Le,m as Ae,n as Ot,p as ae,q as se,r as le,s as Jt,t as Dt,u as Lt,v as At,w as ze,x as Re,y as zt,z as de}from"./chunk-RAIEX5PM.js";import{a as ie}from"./chunk-4ZWIWBIL.js";import{f as Fe,i as Oe}from"./chunk-BYB4DJB3.js";import{C as ht,Ca as Be,Da as ke,Ea as Tt,Fa as te,G as vt,Ga as Ve,Ia as Mt,Ma as Nt,N as et,Oa as jt,Pa as qt,Sa as oe,T as bt,Ta as re,U as yt,a as Ie,aa as xt,ha as V,la as F,ma as Ct,na as St,oa as wt,pa as A,qa as $,r as _t,sa as Pt,wa as qe,y as ft}from"./chunk-TEIHLYRE.js";import{$a as p,Ab as b,Ba as at,Bb as R,Bc as Ne,Cc as je,Da as l,Db as w,Dc as Xe,Ea as I,Eb as P,Fb as T,Gb as J,Hb as ee,Ib as lt,Jb as Ye,Ka as Q,Na as O,Oa as ve,P as W,Q as he,Qb as dt,Ra as be,Rb as ct,Sa as st,Sb as pt,Ta as h,U as rt,V as U,Wb as Se,Xb as mt,_a as ye,a as C,ab as Ge,b as M,ba as u,ca as g,cb as G,db as xe,fa as H,ib as a,jb as s,ka as me,kb as N,kc as we,la as nt,lb as Z,lc as Pe,mb as Y,mc as D,nb as K,nc as Te,ob as S,oc as Me,pb as v,pc as ut,qb as m,qc as L,rb as Ce,sb as X,sc as Ee,tb as j,ub as q,wb as B,xb as k,yb as Ze,yc as gt,za as Qe,zb as c,zc as Ke}from"./chunk-JXUKVGAR.js";var Kt=["header"],Xt=["title"],ei=["subtitle"],ti=["content"],ii=["footer"],oi=["*",[["p-header"]],[["p-footer"]]],ri=["*","p-header","p-footer"];function ni(i,r){i&1&&K(0)}function ai(i,r){if(i&1&&(a(0,"div",8),X(1,1),h(2,ni,1,0,"ng-container",6),s()),i&2){let e=m();l(2),p("ngTemplateOutlet",e.headerTemplate||e._headerTemplate)}}function si(i,r){if(i&1&&(Z(0),c(1),Y()),i&2){let e=m(2);l(),b(e.header)}}function li(i,r){i&1&&K(0)}function di(i,r){if(i&1&&(a(0,"div",9),h(1,si,2,1,"ng-container",10)(2,li,1,0,"ng-container",6),s()),i&2){let e=m();l(),p("ngIf",e.header&&!e._titleTemplate&&!e.titleTemplate),l(),p("ngTemplateOutlet",e.titleTemplate||e._titleTemplate)}}function ci(i,r){if(i&1&&(Z(0),c(1),Y()),i&2){let e=m(2);l(),b(e.subheader)}}function pi(i,r){i&1&&K(0)}function mi(i,r){if(i&1&&(a(0,"div",11),h(1,ci,2,1,"ng-container",10)(2,pi,1,0,"ng-container",6),s()),i&2){let e=m();l(),p("ngIf",e.subheader&&!e._subtitleTemplate&&!e.subtitleTemplate),l(),p("ngTemplateOutlet",e.subtitleTemplate||e._subtitleTemplate)}}function ui(i,r){i&1&&K(0)}function gi(i,r){i&1&&K(0)}function _i(i,r){if(i&1&&(a(0,"div",12),X(1,2),h(2,gi,1,0,"ng-container",6),s()),i&2){let e=m();l(2),p("ngTemplateOutlet",e.footerTemplate||e._footerTemplate)}}var fi=({dt:i})=>`
.p-card {
    background: ${i("card.background")};
    color: ${i("card.color")};
    box-shadow: ${i("card.shadow")};
    border-radius: ${i("card.border.radius")};
    display: flex;
    flex-direction: column;
}

.p-card-caption {
    display: flex;
    flex-direction: column;
    gap: ${i("card.caption.gap")};
}

.p-card-body {
    padding: ${i("card.body.padding")};
    display: flex;
    flex-direction: column;
    gap: ${i("card.body.gap")};
}

.p-card-title {
    font-size: ${i("card.title.font.size")};
    font-weight: ${i("card.title.font.weight")};
}

.p-card-subtitle {
    color: ${i("card.subtitle.color")};
}
`,hi={root:"p-card p-component",header:"p-card-header",body:"p-card-body",caption:"p-card-caption",title:"p-card-title",subtitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer"},Rt=(()=>{class i extends qe{name="card";theme=fi;classes=hi;static \u0275fac=(()=>{let e;return function(t){return(e||(e=H(i)))(t||i)}})();static \u0275prov=W({token:i,factory:i.\u0275fac})}return i})();var ge=(()=>{class i extends Ve{header;subheader;set style(e){xt(this._style(),e)||this._style.set(e)}styleClass;headerFacet;footerFacet;headerTemplate;titleTemplate;subtitleTemplate;contentTemplate;footerTemplate;_headerTemplate;_titleTemplate;_subtitleTemplate;_contentTemplate;_footerTemplate;_style=Q(null);_componentStyle=U(Rt);getBlockableElement(){return this.el.nativeElement.children[0]}templates;ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this._headerTemplate=e.template;break;case"title":this._titleTemplate=e.template;break;case"subtitle":this._subtitleTemplate=e.template;break;case"content":this._contentTemplate=e.template;break;case"footer":this._footerTemplate=e.template;break;default:this._contentTemplate=e.template;break}})}static \u0275fac=(()=>{let e;return function(t){return(e||(e=H(i)))(t||i)}})();static \u0275cmp=O({type:i,selectors:[["p-card"]],contentQueries:function(o,t,n){if(o&1&&(q(n,St,5),q(n,wt,5),q(n,Kt,4),q(n,Xt,4),q(n,ei,4),q(n,ti,4),q(n,ii,4),q(n,A,4)),o&2){let d;B(d=k())&&(t.headerFacet=d.first),B(d=k())&&(t.footerFacet=d.first),B(d=k())&&(t.headerTemplate=d.first),B(d=k())&&(t.titleTemplate=d.first),B(d=k())&&(t.subtitleTemplate=d.first),B(d=k())&&(t.contentTemplate=d.first),B(d=k())&&(t.footerTemplate=d.first),B(d=k())&&(t.templates=d)}},inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},features:[J([Rt]),be],ngContentSelectors:ri,decls:9,vars:10,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[4,"ngIf"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(o,t){o&1&&(Ce(oi),a(0,"div",0),h(1,ai,3,1,"div",1),a(2,"div",2),h(3,di,3,2,"div",3)(4,mi,3,2,"div",4),a(5,"div",5),X(6),h(7,ui,1,0,"ng-container",6),s(),h(8,_i,3,1,"div",7),s()()),o&2&&(xe(t.styleClass),p("ngClass","p-card p-component")("ngStyle",t._style()),ye("data-pc-name","card"),l(),p("ngIf",t.headerFacet||t.headerTemplate||t._headerTemplate),l(2),p("ngIf",t.header||t.titleTemplate||t._titleTemplate),l(),p("ngIf",t.subheader||t.subtitleTemplate||t._subtitleTemplate),l(3),p("ngTemplateOutlet",t.contentTemplate||t._contentTemplate),l(),p("ngIf",t.footerFacet||t.footerTemplate||t._footerTemplate))},dependencies:[L,we,D,Me,Te,$],encapsulation:2,changeDetection:0})}return i})(),We=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=ve({type:i});static \u0275inj=he({imports:[ge,$,$]})}return i})();var vi=["content"],bi=["*"],yi=(i,r)=>({showTransitionParams:i,hideTransitionParams:r}),xi=(i,r)=>({value:i,params:r}),Ci=i=>({closeCallback:i});function Si(i,r){}function wi(i,r){i&1&&h(0,Si,0,0,"ng-template")}function Pi(i,r){if(i&1){let e=S();a(0,"div",1),v("click",function(t){u(e);let n=m();return g(n.onOverlayClick(t))})("@animation.start",function(t){u(e);let n=m();return g(n.onAnimationStart(t))})("@animation.done",function(t){u(e);let n=m();return g(n.onAnimationEnd(t))}),a(1,"div",2),v("click",function(t){u(e);let n=m();return g(n.onContentClick(t))})("mousedown",function(t){u(e);let n=m();return g(n.onContentClick(t))}),X(2),h(3,wi,1,0,null,3),s()()}if(i&2){let e=m();xe(e.styleClass),p("ngClass","p-popover p-component")("ngStyle",e.style)("@animation",Ye(13,xi,e.overlayVisible?"open":"close",Ye(10,yi,e.showTransitionOptions,e.hideTransitionOptions))),ye("aria-modal",e.overlayVisible)("aria-label",e.ariaLabel)("aria-labelledBy",e.ariaLabelledBy),l(3),p("ngTemplateOutlet",e.contentTemplate||e._contentTemplate)("ngTemplateOutletContext",lt(16,Ci,e.onCloseClick.bind(e)))}}var Ti=({dt:i})=>`
.p-popover {
    margin-top: ${i("popover.gutter")};
    background: ${i("popover.background")};
    color: ${i("popover.color")};
    border: 1px solid ${i("popover.border.color")};
    border-radius: ${i("popover.border.radius")};
    box-shadow: ${i("popover.shadow")};
    position: absolute
}

.p-popover-content {
    padding: ${i("popover.content.padding")};
}

.p-popover-flipped {
    margin-top: calc(${i("popover.gutter")} * -1);
    margin-bottom: ${i("popover.gutter")};
}

.p-popover-enter-from {
    opacity: 0;
    transform: scaleY(0.8);
}

.p-popover-leave-to {
    opacity: 0;
}

.p-popover-enter-active {
    transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1), opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
}

.p-popover-leave-active {
    transition: opacity 0.1s linear;
}

.p-popover:after,
.p-popover:before {
    bottom: 100%;
    left: calc(${i("popover.arrow.offset")} + ${i("popover.arrow.left")});
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
}

.p-popover:after {
    border-width: calc(${i("popover.gutter")} - 2px);
    margin-left: calc(-1 * (${i("popover.gutter")} - 2px));
    border-style: solid;
    border-color: transparent;
    border-bottom-color: ${i("popover.background")};
}

.p-popover:before {
    border-width: ${i("popover.gutter")};
    margin-left: calc(-1 * ${i("popover.gutter")});
    border-style: solid;
    border-color: transparent;
    border-bottom-color: ${i("popover.border.color")};
}

.p-popover-flipped:after,
.p-popover-flipped:before {
    bottom: auto;
    top: 100%;
}

.p-popover.p-popover-flipped:after {
    border-bottom-color: transparent;
    border-top-color: ${i("popover.background")};
}

.p-popover.p-popover-flipped:before {
    border-bottom-color: transparent;
    border-top-color: ${i("popover.border.color")};
}

`,Mi={root:"p-popover p-component",content:"p-popover-content"},Wt=(()=>{class i extends qe{name="popover";theme=Ti;classes=Mi;static \u0275fac=(()=>{let e;return function(t){return(e||(e=H(i)))(t||i)}})();static \u0275prov=W({token:i,factory:i.\u0275fac})}return i})(),it=(()=>{class i extends Ve{ariaLabel;ariaLabelledBy;dismissable=!0;style;styleClass;appendTo="body";autoZIndex=!0;ariaCloseLabel;baseZIndex=0;focusOnShow=!0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";onShow=new me;onHide=new me;container;overlayVisible=!1;render=!1;isOverlayAnimationInProgress=!1;selfClick=!1;documentClickListener;target;willHide;scrollHandler;documentResizeListener;contentTemplate;templates;_contentTemplate;destroyCallback;overlayEventListener;overlaySubscription;_componentStyle=U(Wt);zone=U(nt);overlayService=U(Ct);ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this._contentTemplate=e.template;break}})}bindDocumentClickListener(){if(Ee(this.platformId)&&!this.documentClickListener){let e=bt()?"touchstart":"click",o=this.el?this.el.nativeElement.ownerDocument:this.document;this.documentClickListener=this.renderer.listen(o,e,t=>{this.dismissable&&(!this.container?.contains(t.target)&&this.target!==t.target&&!this.target.contains(t.target)&&!this.selfClick&&this.hide(),this.selfClick=!1,this.cd.markForCheck())})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null,this.selfClick=!1)}toggle(e,o){this.isOverlayAnimationInProgress||(this.overlayVisible?(this.hasTargetChanged(e,o)&&(this.destroyCallback=()=>{this.show(null,o||e.currentTarget||e.target)}),this.hide()):this.show(e,o))}show(e,o){o&&e&&e.stopPropagation(),!this.isOverlayAnimationInProgress&&(this.target=o||e.currentTarget||e.target,this.overlayVisible=!0,this.render=!0,this.cd.markForCheck())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement}),this.selfClick=!0}onContentClick(e){let o=e.target;this.selfClick=e.offsetX<o.clientWidth&&e.offsetY<o.clientHeight}hasTargetChanged(e,o){return this.target!=null&&this.target!==(o||e.currentTarget||e.target)}appendContainer(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.container):ht(this.appendTo,this.container))}restoreAppend(){this.container&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.container)}align(){this.autoZIndex&&Oe.set("overlay",this.container,this.baseZIndex+this.config.zIndex.overlay),ft(this.container,this.target,!1);let e=et(this.container),o=et(this.target),t=this.document.defaultView?.getComputedStyle(this.container).getPropertyValue("border-radius"),n=0;e.left<o.left&&(n=o.left-e.left-parseFloat(t)*2),this.container?.style.setProperty(Pt("popover.arrow.left").name,`${n}px`),e.top<o.top&&(this.container.setAttribute("data-p-popover-flipped","true"),_t(this.container,"p-popover-flipped"))}onAnimationStart(e){e.toState==="open"&&(this.container=e.element,this.appendContainer(),this.align(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.focusOnShow&&this.focus(),this.overlayEventListener=o=>{this.container&&this.container.contains(o.target)&&(this.selfClick=!0)},this.overlaySubscription=this.overlayService.clickObservable.subscribe(this.overlayEventListener),this.onShow.emit(null)),this.isOverlayAnimationInProgress=!0}onAnimationEnd(e){switch(e.toState){case"void":this.destroyCallback&&(this.destroyCallback(),this.destroyCallback=null),this.overlaySubscription&&this.overlaySubscription.unsubscribe();break;case"close":this.autoZIndex&&Oe.clear(this.container),this.overlaySubscription&&this.overlaySubscription.unsubscribe(),this.onContainerDestroy(),this.onHide.emit({}),this.render=!1;break}this.isOverlayAnimationInProgress=!1}focus(){let e=vt(this.container,"[autofocus]");e&&this.zone.runOutsideAngular(()=>{setTimeout(()=>e.focus(),5)})}hide(){this.overlayVisible=!1,this.cd.markForCheck()}onCloseClick(e){this.hide(),e.preventDefault()}onEscapeKeydown(e){this.hide()}onWindowResize(){this.overlayVisible&&!yt()&&this.hide()}bindDocumentResizeListener(){if(Ee(this.platformId)&&!this.documentResizeListener){let e=this.document.defaultView;this.documentResizeListener=this.renderer.listen(e,"resize",this.onWindowResize.bind(this))}}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindScrollListener(){Ee(this.platformId)&&(this.scrollHandler||(this.scrollHandler=new Nt(this.target,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener())}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onContainerDestroy(){this.cd.destroyed||(this.target=null),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.container&&this.autoZIndex&&Oe.clear(this.container),this.cd.destroyed||(this.target=null),this.destroyCallback=null,this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.overlaySubscription&&this.overlaySubscription.unsubscribe(),super.ngOnDestroy()}static \u0275fac=(()=>{let e;return function(t){return(e||(e=H(i)))(t||i)}})();static \u0275cmp=O({type:i,selectors:[["p-popover"]],contentQueries:function(o,t,n){if(o&1&&(q(n,vi,4),q(n,A,4)),o&2){let d;B(d=k())&&(t.contentTemplate=d.first),B(d=k())&&(t.templates=d)}},hostBindings:function(o,t){o&1&&v("keydown.escape",function(d){return t.onEscapeKeydown(d)},!1,at)},inputs:{ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",dismissable:[2,"dismissable","dismissable",Se],style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:[2,"autoZIndex","autoZIndex",Se],ariaCloseLabel:"ariaCloseLabel",baseZIndex:[2,"baseZIndex","baseZIndex",mt],focusOnShow:[2,"focusOnShow","focusOnShow",Se],showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onShow:"onShow",onHide:"onHide"},features:[J([Wt]),st,be],ngContentSelectors:bi,decls:1,vars:1,consts:[["role","dialog",3,"ngClass","ngStyle","class","click",4,"ngIf"],["role","dialog",3,"click","ngClass","ngStyle"],[1,"p-popover-content",3,"click","mousedown"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(o,t){o&1&&(Ce(),h(0,Pi,4,18,"div",0)),o&2&&p("ngIf",t.render)},dependencies:[L,we,D,Me,Te,$],encapsulation:2,data:{animation:[gt("animation",[je("void",Ne({transform:"scaleY(0.8)",opacity:0})),je("close",Ne({opacity:0})),je("open",Ne({transform:"translateY(0)",opacity:1})),Xe("void => open",Ke("{{showTransitionParams}}")),Xe("open => close",Ke("{{hideTransitionParams}}"))])]},changeDetection:0})}return i})(),Ut=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=ve({type:i});static \u0275inj=he({imports:[it,$,$]})}return i})();var z=class i{constructor(r){this.http=r}apiUrl="https://bluelockb.onrender.com/api/partidos";partidos=Q([]);cargarPartidos(){this.http.get(this.apiUrl).subscribe(r=>{this.partidos.set(r)})}buscarPartidoByID(r){return this.http.get(`${this.apiUrl}/${r}`)}agregarPartido(r){return this.http.post(`${this.apiUrl}/generar`,{ids:r})}actualizarAlineacionPartido(r,e){return this.http.put(`${this.apiUrl}/actualizar-alineacion/${r}`,e)}eliminarPartido(r){return this.http.delete(`${this.apiUrl}/eliminarPartido/${r}`)}static \u0275fac=function(e){return new(e||i)(rt(Ie))};static \u0275prov=W({token:i,factory:i.\u0275fac,providedIn:"root"})};var ki=()=>({width:"450px"}),Vi=()=>({border:"2px solid #3b82f6","background-color":"#ffffff"}),Fi=()=>({border:"2px solid #1f2937","background-color":"#000000"});function Oi(i,r){if(i&1){let e=S();a(0,"p-avatar",13)(1,"img",14),v("error",function(){u(e);let t=m().$implicit;return g(t.imagen="assets/POR1.png")}),s()()}if(i&2){let e=m().$implicit;G(ee(3,Vi)),l(),p("src",e.imagen,Qe)}}function Ji(i,r){if(i&1&&N(0,"p-badge",15),i&2){let e=m().$implicit;p("value",e.jugador.media)}}function Di(i,r){if(i&1&&(a(0,"span",16),c(1),s()),i&2){let e=m().$implicit;l(),R(" ",e.jugador.apodo," ")}}function Li(i,r){if(i&1&&(Z(0),a(1,"div",9),h(2,Oi,2,4,"p-avatar",10)(3,Ji,1,1,"p-badge",11)(4,Di,2,1,"span",12),s(),Y()),i&2){let e=r.$implicit;l(),Ge("grid-column",e.col)("grid-row",e.row),l(),p("ngIf",e),l(),p("ngIf",e.jugador),l(),p("ngIf",e.jugador)}}function Ai(i,r){if(i&1){let e=S();a(0,"p-avatar",13)(1,"img",14),v("error",function(){u(e);let t=m().$implicit;return g(t.imagen="assets/POR1.png")}),s()()}if(i&2){let e=m().$implicit;G(ee(3,Fi)),l(),p("src",e.imagen,Qe)}}function zi(i,r){if(i&1&&N(0,"p-badge",15),i&2){let e=m().$implicit;p("value",e.jugador.media)}}function Ri(i,r){if(i&1&&(a(0,"span",16),c(1),s()),i&2){let e=m().$implicit;l(),R(" ",e.jugador.apodo," ")}}function $i(i,r){if(i&1&&(Z(0),a(1,"div",9),h(2,Ai,2,4,"p-avatar",10)(3,zi,1,1,"p-badge",11)(4,Ri,2,1,"span",12),s(),Y()),i&2){let e=r.$implicit;l(),Ge("grid-column",e.col)("grid-row",e.row),l(),p("ngIf",e),l(),p("ngIf",e.jugador),l(),p("ngIf",e.jugador)}}function Wi(i,r){if(i&1&&(a(0,"div",2)(1,"p-card",3)(2,"div",4)(3,"h3",5),c(4,"Equipo Blanco"),s(),a(5,"h2",5),c(6),s(),a(7,"div",6),h(8,Li,5,7,"ng-container",7),s()()(),a(9,"p-card",3)(10,"div",4)(11,"h3",8),c(12,"Equipo Negro"),s(),a(13,"h2",8),c(14),s(),a(15,"div",6),h(16,$i,5,7,"ng-container",7),s()()()()),i&2){let e=m();l(6),R("Media Total: ",e.partido.equipoBlanco.mediaTotal,""),l(2),p("ngForOf",e.partido.equipoBlanco.jugadores),l(6),R("Media Total: ",e.partido.equipoNegro.mediaTotal,""),l(2),p("ngForOf",e.partido.equipoNegro.jugadores)}}function Ui(i,r){i&1&&(a(0,"tr")(1,"th"),c(2,"Apodo"),s(),a(3,"th"),c(4,"Media"),s(),a(5,"th"),c(6,"Posici\xF3n"),s(),a(7,"th"),c(8,"Tipo"),s()())}function Hi(i,r){if(i&1&&(a(0,"tr",30)(1,"td"),c(2),s(),a(3,"td"),c(4),s(),a(5,"td"),c(6),s(),a(7,"td"),c(8),s()()),i&2){let e=r.$implicit;p("pSelectableRow",e),l(2),b(e.jugador.apodo),l(2),b(e.media),l(2),b(e.posicionUsada||e.jugador.pos_principal),l(2),b(e.tipo)}}function Qi(i,r){i&1&&(a(0,"tr")(1,"th"),c(2,"Apodo"),s(),a(3,"th"),c(4,"Media"),s(),a(5,"th"),c(6,"Posici\xF3n"),s(),a(7,"th"),c(8,"Tipo"),s()())}function Gi(i,r){if(i&1&&(a(0,"tr",30)(1,"td"),c(2),s(),a(3,"td"),c(4),s(),a(5,"td"),c(6),s(),a(7,"td"),c(8),s()()),i&2){let e=r.$implicit;p("pSelectableRow",e),l(2),b(e.jugador.apodo),l(2),b(e.media),l(2),b(e.posicionUsada||e.jugador.pos_principal),l(2),b(e.tipo)}}function Zi(i,r){if(i&1){let e=S();a(0,"div",23)(1,"p-card",3)(2,"div",4)(3,"p-table",24),T("selectionChange",function(t){u(e);let n=m(2);return P(n.selectedJugadoresBlanco,t)||(n.selectedJugadoresBlanco=t),g(t)}),h(4,Ui,9,0,"ng-template",25)(5,Hi,9,5,"ng-template",26),s()()(),a(6,"div",4)(7,"p-button",27),v("click",function(){u(e);let t=m(2);return g(t.intercambiarJugadores())}),s()(),a(8,"p-card",3)(9,"div",4)(10,"p-table",28),T("selectionChange",function(t){u(e);let n=m(2);return P(n.selectedJugadoresNegro,t)||(n.selectedJugadoresNegro=t),g(t)}),h(11,Qi,9,0,"ng-template",25)(12,Gi,9,5,"ng-template",26),s()()(),a(13,"div",17)(14,"div",19)(15,"p-button",29),v("click",function(){u(e);let t=m(2);return g(t.guardarCambiosPartido())}),s()()()()}if(i&2){let e=m(2);l(3),p("value",e.equipoBlanco),w("selection",e.selectedJugadoresBlanco),l(4),p("disabled",!(e.selectedJugadoresBlanco.length===2&&!e.selectedJugadoresNegro.length||e.selectedJugadoresNegro.length===2&&!e.selectedJugadoresBlanco.length||e.selectedJugadoresBlanco.length===e.selectedJugadoresNegro.length&&e.selectedJugadoresBlanco.length>0)),l(3),p("value",e.equipoNegro),w("selection",e.selectedJugadoresNegro)}}function Yi(i,r){if(i&1){let e=S();a(0,"div")(1,"div",17)(2,"h2"),c(3,"Cambiar Alineacion"),s(),a(4,"p-select",18),T("ngModelChange",function(t){u(e);let n=m();return P(n.jugadorNuevoSeleccionado,t)||(n.jugadorNuevoSeleccionado=t),g(t)}),s(),a(5,"div",19)(6,"p-button",20),v("click",function(){u(e);let t=m();return g(t.agregarASuplente(t.jugadorNuevoSeleccionado,"Blanco"))}),s(),a(7,"p-button",21),v("click",function(){u(e);let t=m();return g(t.agregarASuplente(t.jugadorNuevoSeleccionado,"Negro"))}),s()()(),h(8,Zi,16,5,"div",22),s()}if(i&2){let e=m();l(4),p("options",e.jugadoresNuevosDisponibles),w("ngModel",e.jugadorNuevoSeleccionado),l(2),p("disabled",!e.jugadorNuevoSeleccionado),l(),p("disabled",!e.jugadorNuevoSeleccionado),l(),p("ngIf",e.partido)}}var pe=class i{constructor(r,e,o,t){this.partidoService=r;this.jugadorService=e;this.messageService=o;this.confirmationService=t}idPartido;partido;selectedJugadoresBlanco=[];selectedJugadoresNegro=[];equipoBlanco=[];equipoNegro=[];jugadorNuevoSeleccionado=null;jugadoresNuevosDisponibles=[];jugadores=[];yaInscritosIds=[];cargarPartidosP=new me;posiciones=[{posicion:"POR",row:4,col:3},{posicion:"DFC",row:3,col:2},{posicion:"DFC",row:3,col:4},{posicion:"MC",row:2,col:2},{posicion:"MC",row:2,col:4},{posicion:"DC",row:1,col:3}];ngOnInit(){this.partidoService.buscarPartidoByID(this.idPartido).subscribe(r=>{this.partido=r;let e=this.asignarPosiciones(this.partido.equipoBlanco.jugadores,this.posiciones),o=this.asignarPosiciones(this.partido.equipoNegro.jugadores,this.posiciones);this.partido.equipoBlanco.jugadores=e,this.partido.equipoNegro.jugadores=o,this.generarLista(),this.cargarJugadoresDisponibles()},r=>{console.error("Error obteniendo partido:",r)}),this.jugadorService.cargarJugadoresDisp().subscribe(r=>{this.jugadores=r})}cargarJugadoresDisponibles(){this.yaInscritosIds=[...this.partido.equipoBlanco.jugadores,...this.partido.equipoNegro.jugadores,...this.partido.suplentes].map(r=>r.jugador.id||r.id),this.jugadoresNuevosDisponibles=this.jugadores.filter(r=>!this.yaInscritosIds.includes(r.id))}ActualizarMediaTotal(){let r=[...this.partido.equipoBlanco.jugadores,...this.partido.suplentes.filter(n=>n.equipo==="Blanco")],e=[...this.partido.equipoNegro.jugadores,...this.partido.suplentes.filter(n=>n.equipo==="Negro")],o=r.reduce((n,d)=>n+d.media,0),t=e.reduce((n,d)=>n+d.media,0);this.partido.equipoBlanco.mediaTotal=r.length?Math.round(o/r.length):0,this.partido.equipoNegro.mediaTotal=e.length?Math.round(t/e.length):0}agregarASuplente(r,e){let o={jugador:r,media:r.media,equipo:e,tipo:"Suplente"};this.partido.suplentes.push(o),this.jugadorNuevoSeleccionado=null,this.cargarJugadoresDisponibles(),this.ActualizarMediaTotal(),this.generarLista()}generarLista(){let r=this.partido.equipoBlanco.jugadores.map(n=>M(C({},n),{tipo:"Titular"})),e=this.partido.suplentes.filter(n=>n.equipo==="Blanco").map(n=>M(C({},n),{posicionUsada:n.jugador.pos_principal,tipo:"Suplente"}));this.equipoBlanco=[...r,...e];let o=this.partido.equipoNegro.jugadores.map(n=>M(C({},n),{tipo:"Titular"})),t=this.partido.suplentes.filter(n=>n.equipo==="Negro").map(n=>M(C({},n),{posicionUsada:n.jugador.pos_principal,tipo:"Suplente"}));this.equipoNegro=[...o,...t]}guardarCambiosPartido(){this.confirmationService.confirm({message:"\xBFEst\xE1s seguro de que deseas realizar este cambio?",header:"Confirmar",icon:"pi pi-exclamation-triangle",accept:()=>{let r={jugadores:this.partido.equipoBlanco.jugadores.map(n=>({jugador:n.jugador.id||n.jugador._id,media:n.media,posicionUsada:n.posicionUsada})),mediaTotal:this.partido.equipoBlanco.mediaTotal},e={jugadores:this.partido.equipoNegro.jugadores.map(n=>({jugador:n.jugador.id||n.jugador._id,media:n.media,posicionUsada:n.posicionUsada})),mediaTotal:this.partido.equipoNegro.mediaTotal},o=this.partido.suplentes.map(n=>({jugador:n.jugador.id||n.jugador._id,media:n.media,equipo:n.equipo})),t={equipoBlanco:r,equipoNegro:e,suplentes:o};this.partidoService.actualizarAlineacionPartido(this.idPartido,t).subscribe({next:n=>{this.messageService.add({severity:"success",summary:"\xC9xito",detail:"Alineacion Actualizada"}),this.generarListaPartido()},error:n=>{this.messageService.add({severity:"error",summary:"Error",detail:"No se pudo realizar la Actualizacion"})}})}})}intercambiarJugadoresMismoEquipo(r,e){let o=!!r.equipo,t=!!e.equipo;if(o!==t){let n=r.equipo||e.equipo,d=n==="Blanco"?this.partido.equipoBlanco.jugadores:this.partido.equipoNegro.jugadores,f=this.partido.suplentes,_=d.findIndex(x=>x._id===(o?e._id:r._id)),y=f.findIndex(x=>x._id===(o?r._id:e._id));if(_!==-1&&y!==-1){let x=d[_],E=f[y],_e=M(C({},E),{posicionUsada:x.posicionUsada,row:x.row,col:x.col});delete _e.equipo;let fe=M(C({},x),{equipo:n});delete fe.posicionUsada,delete fe.row,delete fe.col,d[_]=_e,f[y]=fe}}else{let n=[];!o&&!t?n=this.obtenerEquipo(r._id)==="Blanco"?this.partido.equipoBlanco.jugadores:this.partido.equipoNegro.jugadores:n=this.partido.suplentes;let d=n.findIndex(_=>_._id===r._id),f=n.findIndex(_=>_._id===e._id);if(d!==-1&&f!==-1){let _=n[d],y=n[f],x={posicionUsada:_.posicionUsada,row:_.row,col:_.col},E={posicionUsada:y.posicionUsada,row:y.row,col:y.col};n[d]=C(C({},y),x),n[f]=C(C({},_),E)}}this.generarLista()}obtenerEquipo(r){return this.partido.equipoBlanco.jugadores.some(e=>e._id===r)?"Blanco":this.partido.equipoNegro.jugadores.some(e=>e._id===r)?"Negro":null}intercambiarJugadores(){this.confirmationService.confirm({message:"\xBFEst\xE1s seguro de que deseas realizar este cambio?",header:"Confirmar",icon:"pi pi-exclamation-triangle",accept:()=>{if(this.selectedJugadoresBlanco.length===2&&this.selectedJugadoresNegro.length===0){let o=this.selectedJugadoresBlanco[0],t=this.selectedJugadoresBlanco[1];this.intercambiarJugadoresMismoEquipo(o,t)}else if(this.selectedJugadoresBlanco.length===0&&this.selectedJugadoresNegro.length===2){let o=this.selectedJugadoresNegro[0],t=this.selectedJugadoresNegro[1];this.intercambiarJugadoresMismoEquipo(o,t)}else{let o=Math.min(this.selectedJugadoresBlanco.length,this.selectedJugadoresNegro.length);for(let t=0;t<o;t++){let n=this.selectedJugadoresBlanco[t],d=this.selectedJugadoresNegro[t];this.realizarIntercambio(n,d)}}this.selectedJugadoresBlanco=[],this.selectedJugadoresNegro=[],this.ActualizarMediaTotal();let r=this.asignarPosiciones(this.partido.equipoBlanco.jugadores,this.posiciones),e=this.asignarPosiciones(this.partido.equipoNegro.jugadores,this.posiciones);this.partido.equipoBlanco.jugadores=r,this.partido.equipoNegro.jugadores=e}})}realizarIntercambio(r,e){let o=t=>t.tipo==="Titular";if(r.tipo===e.tipo)if(o(r)){let t=this.partido.equipoBlanco.jugadores,n=this.partido.equipoNegro.jugadores,d=t.findIndex(_=>_._id===r._id),f=n.findIndex(_=>_._id===e._id);if(d!==-1&&f!==-1){let _=t[d],y=n[f],x=_.posicionUsada,E=y.posicionUsada;t[d]=M(C({},y),{posicionUsada:x}),n[f]=M(C({},_),{posicionUsada:E})}}else{let t=this.partido.suplentes,n=t.findIndex(f=>f._id===r._id),d=t.findIndex(f=>f._id===e._id);if(n!==-1&&d!==-1){let f=t[n].equipo;t[n].equipo=t[d].equipo,t[d].equipo=f;let _=t[n];t[n]=t[d],t[d]=_}}else{let t=o(r)?r:e,n=o(r)?e:r,f=this.obtenerEquipoJugador(t)==="Blanco"?this.partido.equipoBlanco.jugadores:this.partido.equipoNegro.jugadores,_=f.findIndex(x=>x._id===t._id),y=this.partido.suplentes.findIndex(x=>x._id===n._id);if(_!==-1&&y!==-1){let x=M(C({},n),{tipo:"Titular",posicionUsada:t.posicionUsada,row:t.row,col:t.col});delete x.equipo;let E=M(C({},t),{tipo:"Suplente",equipo:n.equipo});delete E.posicionUsada,delete E.row,delete E.col,f[_]=x,this.partido.suplentes[y]=E}}this.generarLista()}getListaTitulares(r){return r==="Blanco"?this.partido.equipoBlanco.jugadores:this.partido.equipoNegro.jugadores}obtenerEquipoJugador(r){return this.partido.equipoBlanco.jugadores.some(e=>e._id===r._id)?"Blanco":"Negro"}calcularMedia(r){let e=r.reduce((o,t)=>o+t.media,0);return Math.round(e/r.length)}asignarPosiciones=(r,e)=>{let o=[...e],t=Array.isArray(r)?r:[],n={POR:["assets/POR1.png","assets/POR2.png","assets/POR3.png","assets/POR4.png"],DFC:["assets/DFC1.png","assets/DFC2.png","assets/DFC3.png","assets/DFC4.png"],MC:["assets/MC1.png","assets/MC2.png","assets/MC3.png","assets/MC4.png"],DC:["assets/DC1.png","assets/DC2.png","assets/DC3.png","assets/DC4.png"]};return t.map(f=>{let _=o.findIndex(y=>y.posicion===f.posicionUsada);if(_!==-1){let[y]=o.splice(_,1),x=null,E=n[y.posicion];if(E&&E.length>0){let _e=Math.floor(Math.random()*E.length);x=E.splice(_e,1)[0]}return M(C({},f),{row:y.row,col:y.col,imagen:x})}else return M(C({},f),{row:null,col:null,imagen:null})})};generarListaPartido(){this.cargarPartidosP.emit()}static \u0275fac=function(e){return new(e||i)(I(z),I(ie),I(F),I(V))};static \u0275cmp=O({type:i,selectors:[["app-formacion"]],inputs:{idPartido:"idPartido"},outputs:{cargarPartidosP:"cargarPartidosP"},features:[J([F,V])],decls:4,vars:5,consts:[["class","grid grid-cols-1 md:grid-cols-2 gap-4 p-4",4,"ngIf"],[4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"w-full","md:w-auto"],[1,"flex","flex-col","items-center"],[1,"text-xl","font-bold","text-blue-500"],[1,"grid","grid-rows-4","grid-cols-5","gap-4","mt-4","w-full","cancha",2,"background-image","url(assets/field.png)"],[4,"ngFor","ngForOf"],[1,"text-xl","font-bold","text-gray-700"],[1,"relative","flex","flex-col","items-center"],["shape","circle","size","xlarge",3,"style",4,"ngIf"],["class","absolute top-0 right-0",3,"value",4,"ngIf"],["class","text-sm font-semibold mt-2 text-blue-500",4,"ngIf"],["shape","circle","size","xlarge"],[3,"error","src"],[1,"absolute","top-0","right-0",3,"value"],[1,"text-sm","font-semibold","mt-2","text-blue-500"],[1,"flex","flex-col","md:flex-row","gap-4","items-center","justify-center","p-4"],["optionLabel","apodo","placeholder","Selecciona un jugador",1,"w-64",3,"ngModelChange","options","ngModel"],[1,"flex","gap-2"],["label","Agregar al Blanco",3,"click","disabled"],["label","Agregar al Negro",3,"click","disabled"],["class","grid grid-cols-1 md:grid-cols-3 gap-4 p-4",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","p-4"],["selectionMode","multiple",1,"w-full",3,"selectionChange","value","selection"],["pTemplate","header"],["pTemplate","body"],["icon","pi pi-arrow-right-arrow-left",3,"click","disabled"],["selectionMode","multiple",3,"selectionChange","value","selection"],["label","Guardar Cambios",3,"click"],[3,"pSelectableRow"]],template:function(e,o){e&1&&(h(0,Wi,17,4,"div",0)(1,Yi,9,5,"div",1),N(2,"p-confirmdialog")(3,"p-toast")),e&2&&(p("ngIf",o.partido),l(),p("ngIf",(o.partido==null?null:o.partido.estado)==="Abierto"),l(),G(ee(4,ki)))},dependencies:[L,Pe,D,We,ge,A,It,Et,qt,jt,re,oe,ae,Le,Ae,ce,de,ne,De,te,Be,ke,le,se],styles:[".cancha[_ngcontent-%COMP%]{background-size:130%;background-position:center;background-repeat:no-repeat;height:100%;width:100%}"]})};var Xi=()=>({width:"450px"});function eo(i,r){i&1&&(a(0,"p"),c(1,"No hay Partidos registrados"),s())}function to(i,r){if(i&1&&(a(0,"span",25),c(1),dt(2,"date"),s()),i&2){let e=m().$implicit;l(),b(ct(2,1,e.fecha,"EEEE d 'de' MMMM y"))}}function io(i,r){if(i&1){let e=S();a(0,"div",26)(1,"span",27),c(2),s(),a(3,"span",28),c(4,"Equipo Blanco"),s(),N(5,"span",29),a(6,"span",9),c(7),s(),a(8,"span",9),c(9," - "),s(),a(10,"span",9),c(11),s(),N(12,"span",30),a(13,"span",28),c(14,"Equipo Negro"),s(),a(15,"p-button",31),v("click",function(){u(e);let t=m().$implicit,n=m();return g(n.editarPartido(t))}),s(),a(16,"p-button",32),v("click",function(){u(e);let t=m().$implicit,n=m();return g(n.eliminarPartido(t.id))}),s(),a(17,"p-button",33),v("click",function(){u(e);let t=m().$implicit,n=m();return g(n.abrirModal(t.id))}),s()()}if(i&2){let e=m(),o=e.$implicit,t=e.index;l(2),b(t+1),l(5),b(o.marcador.equipoBlanco),l(4),b(o.marcador.equipoNegro),l(4),p("rounded",!0)("outlined",!0),l(),p("rounded",!0)("outlined",!0),l(),p("rounded",!0)("outlined",!0)}}function oo(i,r){i&1&&(a(0,"p-card"),h(1,to,3,4,"ng-template",23)(2,io,18,9,"ng-template",24),s())}function ro(i,r){if(i&1){let e=S();a(0,"p",34),v("click",function(){let t=u(e).$implicit,n=m();return g(n.agregarGoleador(t,"Blanco"))}),c(1),s()}if(i&2){let e=r.$implicit;l(),R(" ",e.apodo," ")}}function no(i,r){if(i&1){let e=S();a(0,"p",34),v("click",function(){let t=u(e).$implicit,n=m();return g(n.agregarGoleador(t,"Negro"))}),c(1),s()}if(i&2){let e=r.$implicit;l(),R(" ",e.apodo," ")}}function ao(i,r){i&1&&(a(0,"p"),c(1,"No hay highlights registradas"),s())}function so(i,r){if(i&1){let e=S();a(0,"p-card")(1,"div",35)(2,"label",36),c(3),s(),a(4,"label",37),c(5,"Goles"),s(),a(6,"p-inputNumber",38),T("ngModelChange",function(t){let n=u(e).$implicit;return P(n.goles,t)||(n.goles=t),g(t)}),v("ngModelChange",function(){u(e);let t=m();return g(t.actualizarMarcador())}),s(),a(7,"label",37),c(8,"Asistencias"),s(),a(9,"p-inputNumber",38),T("ngModelChange",function(t){let n=u(e).$implicit;return P(n.asistencias,t)||(n.asistencias=t),g(t)}),v("ngModelChange",function(){u(e);let t=m();return g(t.actualizarMarcador())}),s(),a(10,"label",37),c(11,"Atajadas"),s(),a(12,"p-inputNumber",38),T("ngModelChange",function(t){let n=u(e).$implicit;return P(n.atajadas,t)||(n.atajadas=t),g(t)}),v("ngModelChange",function(){u(e);let t=m();return g(t.actualizarMarcador())}),s(),a(13,"p-button",39),v("click",function(){let t=u(e).$implicit,n=m();return g(n.eliminarHighlight(t.jugador.id))}),s()()()}if(i&2){let e=r.$implicit,o=r.index;l(2),j("id","nombre",o,""),l(),b(e.jugador.nombre),l(),j("for","goles",o,""),l(2),j("id","goles",o,""),w("ngModel",e.goles),p("min",0)("max",100)("showButtons",!0),l(),j("for","asistencias",o,""),l(2),j("id","asistencias",o,""),w("ngModel",e.asistencias),p("min",0)("max",100)("showButtons",!0),l(),j("for","atajadas",o,""),l(2),j("id","atajadas",o,""),w("ngModel",e.atajadas),p("min",0)("max",100)("showButtons",!0)}}function lo(i,r){i&1&&(a(0,"p"),c(1,"No hay highlights registradas"),s())}function co(i,r){if(i&1){let e=S();a(0,"p-card")(1,"div",35)(2,"label",36),c(3),s(),a(4,"label",37),c(5,"Goles"),s(),a(6,"p-inputNumber",38),T("ngModelChange",function(t){let n=u(e).$implicit;return P(n.goles,t)||(n.goles=t),g(t)}),v("ngModelChange",function(){u(e);let t=m();return g(t.actualizarMarcador())}),s(),a(7,"label",37),c(8,"Asistencias"),s(),a(9,"p-inputNumber",38),T("ngModelChange",function(t){let n=u(e).$implicit;return P(n.asistencias,t)||(n.asistencias=t),g(t)}),v("ngModelChange",function(){u(e);let t=m();return g(t.actualizarMarcador())}),s(),a(10,"label",37),c(11,"Atajadas"),s(),a(12,"p-inputNumber",38),T("ngModelChange",function(t){let n=u(e).$implicit;return P(n.atajadas,t)||(n.atajadas=t),g(t)}),v("ngModelChange",function(){u(e);let t=m();return g(t.actualizarMarcador())}),s(),a(13,"p-button",39),v("click",function(){let t=u(e).$implicit,n=m();return g(n.eliminarHighlight(t.jugador.id))}),s()()()}if(i&2){let e=r.$implicit,o=r.index;l(2),j("id","nombre",o,""),l(),b(e.jugador.nombre),l(),j("for","goles",o,""),l(2),j("id","goles",o,""),w("ngModel",e.goles),p("min",0)("max",100)("showButtons",!0),l(),j("for","asistencias",o,""),l(2),j("id","asistencias",o,""),w("ngModel",e.asistencias),p("min",0)("max",100)("showButtons",!0),l(),j("for","atajadas",o,""),l(2),j("id","atajadas",o,""),w("ngModel",e.atajadas),p("min",0)("max",100)("showButtons",!0)}}function po(i,r){if(i&1){let e=S();a(0,"app-formacion",40),v("cargarPartidosP",function(){u(e);let t=m();return g(t.cargarPartidos())}),s()}if(i&2){let e=m();p("idPartido",e.idPartido)}}var Ue=class i{constructor(r,e,o,t){this.http=r;this.messageService=e;this.partidoService=o;this.confirmationService=t}partidos=[];modalVisible=!1;selectedMatch=this.getEmptyMatch();showPopoverBlanco=!1;showPopoverNegro=!1;mostrarModal=!1;mostrarAlineacion=!1;idPartido;abrirModal(r){this.idPartido=r,this.mostrarModal=!0}editarAlineacion(r){this.idPartido=r,this.mostrarAlineacion=!0}ngOnInit(){this.cargarPartidos()}cargarPartidos(){this.http.get("https://bluelockb.onrender.com/api/partidos/listar-partidos").subscribe(r=>{this.partidos=r.map(e=>M(C({},e),{id:e._id}))})}editarPartido(r){this.selectedMatch=M(C({},r),{highlights:[...r.highlights]}),this.modalVisible=!0}getGoleadoresBlanco(){return this.selectedMatch?.highlights.filter(r=>r.equipo==="Blanco")||[]}getGoleadoresNegro(){return this.selectedMatch?.highlights.filter(r=>r.equipo==="Negro")||[]}actualizarMarcador(){let r=this.selectedMatch.highlights.filter(o=>o.equipo==="Blanco").reduce((o,t)=>o+t.goles,0),e=this.selectedMatch.highlights.filter(o=>o.equipo==="Negro").reduce((o,t)=>o+t.goles,0);this.selectedMatch.marcador={equipoBlanco:r,equipoNegro:e}}eliminarHighlight(r){this.selectedMatch.highlights=this.selectedMatch.highlights.filter(e=>e.jugador.id!==r),this.actualizarMarcador()}getJugadoresDisponibles(r){let e=r==="Blanco"?this.selectedMatch.equipoBlanco:this.selectedMatch.equipoNegro,o=this.selectedMatch.suplentes.filter(f=>f.equipo===r).map(f=>f.jugador),n=[...e.jugadores.map(f=>f.jugador),...o],d=this.selectedMatch.highlights.filter(f=>f.equipo===r).map(f=>f.jugador.id);return n.filter(f=>!d.includes(f.id))}agregarGoleador(r,e){this.selectedMatch.highlights.push({id:r.id,jugador:{id:r.id,nombre:r.apodo},goles:0,asistencias:0,atajadas:0,equipo:e}),e==="Blanco"?this.showPopoverBlanco=!1:this.showPopoverNegro=!1,this.actualizarMarcador()}eliminarPartido(r){this.confirmationService.confirm({message:"\xBFEst\xE1s seguro de que deseas eliminar el Partido?",header:"Confirmar",icon:"pi pi-exclamation-triangle",accept:()=>{this.partidoService.eliminarPartido(r).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Partido Eliminado",detail:"El partido se ha eliminado correctamente."}),this.partidos=this.partidos.filter(e=>e.id!==r)},error:e=>{let o=e?.error?.message||e?.message||"Hubo un problema al generar la alineaci\xF3n.";this.messageService.add({severity:"error",summary:"Error",detail:o})}})}})}verAlineacion(r){alert(`Alineacion de: ${r}`)}opcionesEstado=[{label:"Abierto",value:"Abierto"},{label:"Cerrado",value:"Cerrado"}];saveMatch(){if(this.partidos.findIndex(e=>e.id===this.selectedMatch.id)!==-1){let e=this.selectedMatch.highlights.filter(_=>_.equipo==="Blanco").reduce((_,y)=>_+y.goles,0),o=this.selectedMatch.highlights.filter(_=>_.equipo==="Negro").reduce((_,y)=>_+y.goles,0),t={equipoBlanco:e,equipoNegro:o},n=this.selectedMatch.highlights.map(_=>({jugador:_.jugador.id,equipo:_.equipo,goles:_.goles,asistencias:_.asistencias,atajadas:_.atajadas})),d=this.selectedMatch.estado,f={marcador:t,highlights:n,estado:d};this.http.put(`https://bluelockb.onrender.com/api/partidos/actualizar-partido/${this.selectedMatch.id}`,f).subscribe(_=>{this.modalVisible=!1,this.cargarPartidos(),this.messageService.add({severity:"success",summary:"Exitoso",detail:"El partido fue guardado correctamente"})},_=>{this.messageService.add({severity:"error",summary:"Error",detail:"Hubo un error al guardar el partido"})})}}getEmptyMatch(){return{id:"",fecha:new Date().toISOString(),equipoBlanco:{jugadores:[],mediaTotal:0},equipoNegro:{jugadores:[],mediaTotal:0},marcador:{equipoBlanco:0,equipoNegro:0},suplentes:[],highlights:[],estado:"Abierto"}}static \u0275fac=function(e){return new(e||i)(I(Ie),I(F),I(z),I(V))};static \u0275cmp=O({type:i,selectors:[["app-partidos"]],features:[J([F,V])],decls:43,vars:20,consts:[["popoverBlanco",""],["popoverNegro",""],[1,"card","w-full","md:w-auto"],[1,"container"],[4,"ngIf"],[4,"ngFor","ngForOf"],["header","Editar Partido",3,"visibleChange","visible","modal","closable"],[1,"p-fluid","parent"],[1,"div1"],[1,"marcador"],["fluid","","required","",3,"ngModelChange","options","ngModel"],[1,"div2"],["label","A\xF1adir Anotador","icon","pi pi-plus",3,"click"],[1,"popover-content"],[3,"click",4,"ngFor","ngForOf"],[1,"div3"],[1,"div4"],[1,"div5"],[1,"div6"],["label","Guardar",1,"p-button-primary",3,"click"],["label","Cancelar",1,"p-button-secondary",3,"click"],["modal","","header","Formaci\xF3n del Partido",3,"visibleChange","visible"],[3,"idPartido","cargarPartidosP",4,"ngIf"],["pTemplate","header"],["pTemplate","content"],[1,"fecha"],[1,"contenido"],[1,"numero"],[1,"equipo"],[1,"circulo","blanco"],[1,"circulo","negro"],["icon","pi pi-pencil","severity","success",3,"click","rounded","outlined"],["icon","pi pi-trash","severity","danger",3,"click","rounded","outlined"],["icon","pi pi-eye","severity","info",3,"click","rounded","outlined"],[3,"click"],[1,"p-field"],[1,"block","font-bold","mb-2",3,"id"],[1,"block","font-bold","mb-2",3,"for"],[3,"ngModelChange","id","ngModel","min","max","showButtons"],["icon","pi pi-times","styleClass","p-button-danger",3,"click"],[3,"cargarPartidosP","idPartido"]],template:function(e,o){if(e&1){let t=S();a(0,"div",2)(1,"div",3),h(2,eo,2,0,"p",4)(3,oo,3,0,"p-card",5),s()(),a(4,"p-dialog",6),T("visibleChange",function(d){return u(t),P(o.modalVisible,d)||(o.modalVisible=d),g(d)}),a(5,"div",7)(6,"div",8),c(7," Equipo Blanco "),a(8,"span",9),c(9),s(),c(10," - Equipo Negro "),a(11,"span",9),c(12),s(),a(13,"p-select",10),T("ngModelChange",function(d){return u(t),P(o.selectedMatch.estado,d)||(o.selectedMatch.estado=d),g(d)}),s()(),a(14,"div",11)(15,"span"),c(16,"Goleadores Equipo Blanco"),s(),a(17,"p-button",12),v("click",function(d){u(t);let f=Ze(19);return g(f.toggle(d))}),s(),a(18,"p-popover",null,0)(20,"div",13),h(21,ro,2,1,"p",14),s()()(),a(22,"div",15)(23,"span"),c(24,"Goleadores Equipo Negro"),s(),a(25,"p-button",12),v("click",function(d){u(t);let f=Ze(27);return g(f.toggle(d))}),s(),a(26,"p-popover",null,1)(28,"div",13),h(29,no,2,1,"p",14),s()()(),a(30,"div",16),h(31,ao,2,0,"p",4)(32,so,14,27,"p-card",5),s(),a(33,"div",17),h(34,lo,2,0,"p",4)(35,co,14,27,"p-card",5),s(),a(36,"div",18)(37,"p-button",19),v("click",function(){return u(t),g(o.saveMatch())}),s(),a(38,"p-button",20),v("click",function(){return u(t),g(o.modalVisible=!1)}),s()()()(),a(39,"p-dialog",21),T("visibleChange",function(d){return u(t),P(o.mostrarModal,d)||(o.mostrarModal=d),g(d)}),h(40,po,1,1,"app-formacion",22),s(),N(41,"p-toast")(42,"p-confirmdialog")}e&2&&(l(2),p("ngIf",o.partidos.length===0),l(),p("ngForOf",o.partidos),l(),w("visible",o.modalVisible),p("modal",!0)("closable",!0),l(5),b(o.selectedMatch.marcador.equipoBlanco),l(3),b(o.selectedMatch.marcador.equipoNegro),l(),p("options",o.opcionesEstado),w("ngModel",o.selectedMatch.estado),l(8),p("ngForOf",o.getJugadoresDisponibles("Blanco")),l(8),p("ngForOf",o.getJugadoresDisponibles("Negro")),l(2),p("ngIf",!o.getGoleadoresBlanco().length),l(),p("ngForOf",o.getGoleadoresBlanco()),l(2),p("ngIf",!o.getGoleadoresNegro().length),l(),p("ngForOf",o.getGoleadoresNegro()),l(4),w("visible",o.mostrarModal),l(),p("ngIf",o.mostrarModal),l(2),G(ee(19,Xi)))},dependencies:[L,Pe,D,ut,ae,A,te,Be,Tt,ke,re,oe,Fe,Je,Bt,Re,ze,We,ge,Ut,it,le,se,ce,de,pe,ne,De],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:20px}.partido-card[_ngcontent-%COMP%]{background:flex;color:flex;padding:10px;border-radius:10px;display:flex;flex-direction:column;border:1px solid #2e2e42}.fecha[_ngcontent-%COMP%]{font-size:.8rem;color:#b0b0b0;margin-bottom:5px}.contenido[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex-wrap:wrap}.numero[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.equipo[_ngcontent-%COMP%]{font-size:1rem;font-weight:700}.circulo[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;outline:auto}.blanco[_ngcontent-%COMP%]{background:#fff}.negro[_ngcontent-%COMP%]{background:#000}.marcador[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.edit[_ngcontent-%COMP%]{margin-left:auto;color:#007bff}.delete[_ngcontent-%COMP%]{color:red}.parent[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:repeat(6,1fr);gap:8px}.div1[_ngcontent-%COMP%]{grid-column:span 4 / span 4}.div2[_ngcontent-%COMP%]{grid-column:span 2 / span 2;grid-row-start:2}.div3[_ngcontent-%COMP%]{grid-column:span 2 / span 2;grid-column-start:3;grid-row-start:2}.div4[_ngcontent-%COMP%]{grid-column:span 2 / span 2;grid-row:span 3 / span 3;grid-row-start:3}.div5[_ngcontent-%COMP%]{grid-column:span 2 / span 2;grid-row:span 3 / span 3;grid-column-start:3;grid-row-start:3}.div6[_ngcontent-%COMP%]{grid-column:span 4 / span 4;grid-row-start:6}"]})};function mo(i,r){if(i&1){let e=S();a(0,"p-button",16),v("click",function(t){u(e);let n=m();return g(n.confirm1(t))}),s()}i&2&&p("outlined",!0)}function uo(i,r){i&1&&(a(0,"tr"),N(1,"th"),a(2,"th"),c(3,"Jugador"),s(),a(4,"th"),c(5,"Posici\xF3n Principal"),s(),a(6,"th"),c(7,"Posici\xF3n Secundaria"),s(),a(8,"th"),c(9,"Lado"),s(),a(10,"th"),c(11,"Media"),s()())}function go(i,r){if(i&1&&(a(0,"tr",17)(1,"td"),N(2,"p-tableCheckbox",18),s(),a(3,"td"),c(4),s(),a(5,"td"),c(6),s(),a(7,"td"),c(8),s(),a(9,"td"),c(10),s(),a(11,"td"),c(12),s()()),i&2){let e=r.$implicit;p("pSelectableRow",e),l(2),p("value",e),l(2),b(e.apodo),l(2),b(e.pos_principal),l(2),b(e.pos_secundaria),l(2),b(e.pierna_habil),l(2),b(e.media)}}function _o(i,r){i&1&&(a(0,"tr"),N(1,"th"),a(2,"th"),c(3,"Jugador"),s(),a(4,"th"),c(5,"Posici\xF3n Principal"),s(),a(6,"th"),c(7,"Posici\xF3n Secundaria"),s(),a(8,"th"),c(9,"Lado"),s(),a(10,"th"),c(11,"Media"),s()())}function fo(i,r){if(i&1){let e=S();a(0,"tr")(1,"td")(2,"p-button",19),v("click",function(){let t=u(e).$implicit,n=m();return g(n.removerJugador(t))}),s()(),a(3,"td"),c(4),s(),a(5,"td"),c(6),s(),a(7,"td"),c(8),s(),a(9,"td"),c(10),s(),a(11,"td"),c(12),s()()}if(i&2){let e=r.$implicit;l(4),b(e.apodo),l(2),b(e.pos_principal),l(2),b(e.pos_secundaria),l(2),b(e.pierna_habil),l(2),b(e.media)}}function ho(i,r){if(i&1&&N(0,"app-formacion",20),i&2){let e=m();p("idPartido",e.idPartido)}}var He=class i{constructor(r,e,o,t){this.jugadorService=r;this.confirmationService=e;this.partidoService=o;this.messageService=t}inscritos=[];jugadores=Q([]);presentados=[];selectedJugadores=[];jsonVisible=!1;jsonOutput="";mostrarModal=!1;idPartido;partidoCreado;ngOnInit(){this.jugadorService.cargarJugadores(),this.jugadores=this.jugadorService.jugadores,this.actualizarSeleccionados()}actualizarSeleccionados(){this.selectedJugadores=this.inscritos.filter(r=>this.presentados.some(e=>e.nombre===r.nombre))}moverJugadores(){this.selectedJugadores.length&&(this.selectedJugadores.forEach(r=>{this.presentados.some(e=>e.nombre===r.nombre)||this.presentados.push(r)}),this.inscritos=this.inscritos.filter(r=>!this.selectedJugadores.includes(r)),this.selectedJugadores=[...this.selectedJugadores])}removerJugador(r){this.inscritos.some(e=>e.nombre===r.nombre)||this.inscritos.push(r),this.presentados=this.presentados.filter(e=>e!==r),this.selectedJugadores=this.selectedJugadores.filter(e=>e!==r)}mostrarJSON(){this.jsonVisible=!this.jsonVisible}abrirModal(r){this.idPartido=r,this.mostrarModal=!0}confirm1(r){let e=this.presentados.map(o=>o.id).filter(o=>o!==void 0);this.confirmationService.confirm({message:`\xBFEst\xE1s seguro de que deseas generar la alineaci\xF3n con ${this.presentados.length} jugadores?`,accept:()=>{this.partidoService.agregarPartido(e).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Partido Creado",detail:"La alineaci\xF3n se ha generado correctamente."}),this.partidoCreado=o,o&&this.partidoCreado.id&&this.abrirModal(this.partidoCreado.id)},error:o=>{let t=o?.error?.error||o?.message||"Hubo un problema al generar la alineaci\xF3n.";this.messageService.add({severity:"error",summary:"Error",detail:t})}})}})}static \u0275fac=function(e){return new(e||i)(I(ie),I(V),I(z),I(F))};static \u0275cmp=O({type:i,selectors:[["app-nuevo-partido"]],features:[J([F,ie,V,z])],decls:27,vars:6,consts:[["start",""],["styleClass","mb-6"],[1,"grid","grid-cols-12","gap-8"],[1,"col-span-12","md:col-span-5"],[1,"card","!mb-8"],[1,"col-9"],[1,"text-center","bg-primary","text-white","p-2","border-round"],["dataKey","nombre",1,"w-full",3,"selectionChange","value","selection"],["pTemplate","header"],["pTemplate","body"],[1,"col-span-2","md:col-span-2","text-center","mt-4"],["icon","pi pi-arrow-right-arrow-left",3,"click","disabled"],[1,"col-5"],[1,"w-full",3,"value"],["modal","","header","Formaci\xF3n del Partido",3,"visibleChange","visible"],[3,"idPartido",4,"ngIf"],["label","Generar Alineacion","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"click","outlined"],[3,"pSelectableRow"],[3,"value"],["icon","pi pi-times",1,"p-button-rounded","p-button-danger","p-button-text",3,"click"],[3,"idPartido"]],template:function(e,o){if(e&1){let t=S();a(0,"p-toolbar",1),h(1,mo,1,1,"ng-template",null,0,pt),s(),a(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h3",6),c(8,"Jugadores Inscritos"),s(),a(9,"p-table",7),T("selectionChange",function(d){return u(t),P(o.selectedJugadores,d)||(o.selectedJugadores=d),g(d)}),h(10,uo,12,0,"ng-template",8)(11,go,13,7,"ng-template",9),s()()()(),a(12,"div",10)(13,"p-button",11),v("click",function(){return u(t),g(o.moverJugadores())}),s()(),a(14,"div",3)(15,"div",4)(16,"div",12)(17,"h3",6),c(18,"Jugadores Presentados"),s(),a(19,"p-table",13),h(20,_o,12,0,"ng-template",8)(21,fo,13,5,"ng-template",9),s()()()(),N(22,"p-toast")(23,"p-confirmdialog"),s(),a(24,"p-dialog",14),T("visibleChange",function(d){return u(t),P(o.mostrarModal,d)||(o.mostrarModal=d),g(d)}),h(25,ho,1,1,"app-formacion",15),s(),N(26,"p-toast")}e&2&&(l(9),p("value",o.jugadores()),w("selection",o.selectedJugadores),l(4),p("disabled",!o.selectedJugadores),l(6),p("value",o.presentados),l(5),w("visible",o.mostrarModal),l(),p("ngIf",o.mostrarModal))},dependencies:[L,D,ae,Le,A,Ae,Ot,te,re,oe,Mt,le,se,Dt,Jt,Lt,Fe,At,ne,Ft,Je,Re,ze,zt,Vt,kt,ce,de,pe],encapsulation:2})};var vn=[{path:"partidos",component:Ue,canActivate:[tt]},{path:"nuevoPartido",component:He,canActivate:[tt]}];export{vn as default};
